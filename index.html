<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sala de Cultivo</title>
    <!-- Agregar CSS para el estilo -->
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        .controls {
            margin-top: 20px;
        }
        .slider {
            width: 200px;
        }
        .indicator {
            display: inline-block;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 2px solid #ccc;
            line-height: 150px;
            font-size: 24px;
            margin: 10px;
        }
        .indicator span {
            font-weight: bold;
        }
        .green { background-color: #5cb85c; }
        .blue { background-color: #0275d8; }
        .orange { background-color: #f0ad4e; }
    </style>

    <!-- Importar Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js"></script>
</head>
<body>
    <h1>Sala de Cultivo</h1>

    <!-- Cuadrantes de visualización -->
    <div class="indicators">
        <div id="temperature-indicator" class="indicator green">
            <span id="temperature">Cargando...</span> °C
        </div>
        <div id="humidity-indicator" class="indicator blue">
            <span id="humidity">Cargando...</span> %
        </div>
        <div id="soil-moisture-indicator" class="indicator orange">
            <span id="soilMoisture">Cargando...</span> %
        </div>
    </div>

    <!-- Controles interactivos -->
    <div class="controls">
        <h3>Controlar Variables</h3>
        <label for="temperature-slider">Temperatura (°C): </label>
        <input type="range" id="temperature-slider" class="slider" min="10" max="40" step="0.5" value="25">
        <span id="temperature-value">25</span> °C <br>

        <label for="humidity-slider">Humedad (%): </label>
        <input type="range" id="humidity-slider" class="slider" min="30" max="90" step="1" value="60">
        <span id="humidity-value">60</span> % <br>

        <label for="soil-moisture-slider">Humedad del Suelo (%): </label>
        <input type="range" id="soil-moisture-slider" class="slider" min="0" max="100" step="1" value="75">
        <span id="soil-moisture-value">75</span> % <br>
    </div>

    <script>
        // Configuración de Firebase
        const firebaseConfig = {
            apiKey: "TU_API_KEY",
            authDomain: "TU_AUTH_DOMAIN",
            databaseURL: "TU_DATABASE_URL",
            projectId: "TU_PROJECT_ID",
            storageBucket: "TU_STORAGE_BUCKET",
            messagingSenderId: "TU_MESSAGING_SENDER_ID",
            appId: "TU_APP_ID"
        };

        // Inicializar Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Referencias a los valores en la base de datos
        const temperatureRef = database.ref('temperature');
        const humidityRef = database.ref('humidity');
        const soilMoistureRef = database.ref('soilMoisture');

        // Actualizar la página con los datos en tiempo real
        temperatureRef.on('value', function(snapshot) {
            document.getElementById('temperature').textContent = snapshot.val();
            document.getElementById('temperature-slider').value = snapshot.val();
            document.getElementById('temperature-value').textContent = snapshot.val();
        });

        humidityRef.on('value', function(snapshot) {
            document.getElementById('humidity').textContent = snapshot.val();
            document.getElementById('humidity-slider').value = snapshot.val();
            document.getElementById('humidity-value').textContent = snapshot.val();
        });

        soilMoistureRef.on('value', function(snapshot) {
            document.getElementById('soilMoisture').textContent = snapshot.val();
            document.getElementById('soil-moisture-slider').value = snapshot.val();
            document.getElementById('soil-moisture-value').textContent = snapshot.val();
        });

        // Controladores para actualizar Firebase cuando cambian los valores de los sliders
        document.getElementById('temperature-slider').addEventListener('input', function() {
            const temperature = this.value;
            temperatureRef.set(temperature); // Enviar nuevo valor a Firebase
            document.getElementById('temperature-value').textContent = temperature;
        });

        document.getElementById('humidity-slider').addEventListener('input', function() {
            const humidity = this.value;
            humidityRef.set(humidity); // Enviar nuevo valor a Firebase
            document.getElementById('humidity-value').textContent = humidity;
        });

        document.getElementById('soil-moisture-slider').addEventListener('input', function() {
            const soilMoisture = this.value;
            soilMoistureRef.set(soilMoisture); // Enviar nuevo valor a Firebase
            document.getElementById('soil-moisture-value').textContent = soilMoisture;
        });
    </script>
</body>
</html>
